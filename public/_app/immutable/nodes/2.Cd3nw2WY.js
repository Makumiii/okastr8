import{c as H,a as o,f as g,s as f,t as Q}from"../chunks/BesHKk2l.js";import{o as gt}from"../chunks/CMSYLF-L.js";import{f as u,p as $t,b as ht,c as V,s as R,d as t,e as r,g as e,r as a,n as F,t as z,u as pt,ae as yt}from"../chunks/DcwGHiHW.js";import{l as tt,s as et,i as E}from"../chunks/VPZc6XJw.js";import{e as X,i as Y}from"../chunks/D9-Fv5Cr.js";import{f as bt,s as wt}from"../chunks/sNASJAqg.js";import{C as k}from"../chunks/CcxZSFxj.js";import{g as Pt,B as W}from"../chunks/BhjZa1Ej.js";import{T as At}from"../chunks/9JUkeufA.js";import"../chunks/BlO2upe1.js";import{I as at,s as rt}from"../chunks/BTbKrF2_.js";import{C as zt,A as jt}from"../chunks/Db-8SFoX.js";import{A as kt}from"../chunks/ECDRYEVp.js";function Ct(N,w){const s=tt(w,["children","$$slots","$$events","$$legacy"]);const C=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z"}],["path",{d:"M12 22V12"}],["polyline",{points:"3.29 7 12 12 20.71 7"}],["path",{d:"m7.5 4.27 9 5.15"}]];at(N,et({name:"package"},()=>s,{get iconNode(){return C},children:(P,L)=>{var $=H(),S=u($);rt(S,w,"default",{}),o(P,$)},$$slots:{default:!0}}))}function Nt(N,w){const s=tt(w,["children","$$slots","$$events","$$legacy"]);const C=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18"}]];at(N,et({name:"server"},()=>s,{get iconNode(){return C},children:(P,L)=>{var $=H(),S=u($);rt(S,w,"default",{}),o(P,$)},$$slots:{default:!0}}))}function St(N,w){const s=tt(w,["children","$$slots","$$events","$$legacy"]);const C=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"}]];at(N,et({name:"zap"},()=>s,{get iconNode(){return C},children:(P,L)=>{var $=H(),S=u($);rt(S,w,"default",{}),o(P,$)},$$slots:{default:!0}}))}var Mt=g('<div class="h-4 w-24 rounded bg-[var(--border)]"></div> <div class="mt-4 h-8 w-16 rounded bg-[var(--border)]"></div>',1),Dt=g('<div class="grid gap-6 md:grid-cols-2 lg:grid-cols-4"></div>'),It=g('<!> <p class="text-[var(--error)]"> </p>',1),Tt=g('<span class="inline-block h-2 w-2 rounded-full bg-green-400"></span> ',1),Gt=g('<div class="flex items-center justify-between"><div><h2 class="text-xl font-semibold"> </h2> <p class="mt-1 opacity-80"> </p></div> <div class="flex items-center gap-3"><!> <span class="flex items-center gap-2 rounded-lg bg-white/10 px-3 py-1.5 text-sm"><!> </span></div></div>'),Lt=g('<div class="flex items-start justify-between"><span class="text-sm text-[var(--text-secondary)]">Services Active</span> <!></div> <div class="mt-3 text-3xl font-bold text-[var(--text-primary)]"> <span class="text-lg font-normal text-[var(--text-muted)]"> </span></div> <div class="mt-3 h-2 overflow-hidden rounded-full bg-[var(--border)]"><div class="h-full bg-[var(--primary)]"></div></div>',1),Bt=g('<div class="flex items-start justify-between"><span class="text-sm opacity-70">System Uptime</span> <!></div> <div class="mt-3 text-2xl font-bold"> </div> <div class="mt-3 border-t border-white/10 pt-3 text-sm opacity-70"> </div>',1),Ft=g('<div class="flex items-start justify-between"><span class="text-sm text-[var(--text-secondary)]">Environments</span> <!></div> <div class="mt-3 text-3xl font-bold text-[var(--text-primary)]"> </div> <div class="mt-3 flex flex-wrap gap-1.5"></div>',1),Ht=g('<div class="flex items-start justify-between"><span class="text-sm text-[var(--warning)] opacity-80">System Load</span> <!></div> <div class="mt-3 text-3xl font-bold text-[var(--text-primary)]"> </div> <p class="mt-1 text-sm text-[var(--text-secondary)]">Active processes</p>',1),Ot=g('<div><h3 class="text-lg font-semibold text-[var(--text-primary)]">Deploy new app?</h3> <p class="mt-0.5 text-sm text-[var(--text-secondary)]">Connect to GitHub and ship in seconds.</p></div> <a href="/github" class="flex items-center gap-2 rounded-full bg-[var(--text-primary)] px-6 py-2.5 text-sm font-medium text-white transition-colors hover:bg-[var(--primary)]">Go to GitHub <!></a>',1),Ut=g('<div class="flex items-center gap-3"><span></span> <span class="font-medium text-[var(--text-primary)]"> </span> <!></div> <!>',1),Vt=g('<!> <div class="grid gap-6 md:grid-cols-2 lg:grid-cols-4"><!> <!> <!> <!></div> <!> <div><h3 class="mb-4 text-lg font-semibold text-[var(--text-primary)]">Active Services</h3> <div class="space-y-3"></div></div>',1),Et=g('<div class="space-y-6"><div><h1 class="text-2xl font-bold text-[var(--text-primary)]">Dashboard</h1> <p class="mt-1 text-[var(--text-secondary)]">Monitor your server and deployments</p></div> <!></div>');function se(N,w){$t(w,!0);let s=R(null),C=R(!0),P=R("");gt(()=>{L();const c=setInterval(L,3e4);return()=>clearInterval(c)});async function L(){try{const c=await Pt("/system/status");c.success&&c.data?V(s,c.data,!0):V(P,c.message||"Failed to load status",!0)}catch{V(P,"Failed to connect to server")}finally{V(C,!1)}}var $=Et(),S=t(r($),2);{var mt=c=>{var I=Dt();X(I,20,()=>Array(4),Y,(Z,st)=>{k(Z,{class:"animate-pulse",children:(q,M)=>{var T=Mt();F(2),o(q,T)},$$slots:{default:!0}})}),a(I),o(c,I)},ft=c=>{var I=H(),Z=u(I);{var st=M=>{k(M,{class:"bg-[var(--error-light)] flex items-center gap-2",children:(T,it)=>{var O=It(),G=u(O);At(G,{class:"text-[var(--error)]"});var B=t(G,2),U=r(B,!0);a(B),z(()=>f(U,e(P))),o(T,O)},$$slots:{default:!0}})},q=M=>{var T=H(),it=u(T);{var O=G=>{var B=Vt(),U=u(B);k(U,{class:"bg-gradient-to-br from-[var(--primary)] to-[var(--primary-hover)] text-white",children:(_,y)=>{var l=Gt(),i=r(l),v=r(i),n=r(v);a(v);var p=t(v,2),m=r(p);a(p),a(i);var d=t(i,2),x=r(d);W(x,{variant:"success",class:"!bg-white/20 !text-white",children:(D,K)=>{var A=Tt(),_t=t(u(A));z(xt=>f(_t,` ${xt??""}`),[()=>e(s).health.status.toUpperCase()]),o(D,A)},$$slots:{default:!0}});var j=t(x,2),h=r(j);Nt(h,{size:14});var b=t(h);a(j),a(d),a(l),z(()=>{f(n,`Welcome back, ${e(s).user??""}`),f(m,`All systems operational. ${e(s).health.counts.info??""} notifications
                        today.`),f(b,` ${e(s).hostname??""}`)}),o(_,l)},$$slots:{default:!0}});var J=t(U,2),ot=r(J);k(ot,{children:(_,y)=>{var l=Lt(),i=u(l),v=t(r(i),2);St(v,{size:20}),a(i);var n=t(i,2),p=r(n),m=t(p),d=r(m);a(m),a(n);var x=t(n,2),j=r(x);a(x),z((h,b)=>{f(p,`${h??""} `),f(d,`/ ${e(s).services.length??""}`),bt(j,`width: ${b??""}%`)},[()=>e(s).services.filter(h=>h.running).length,()=>e(s).services.filter(h=>h.running).length/e(s).services.length*100]),o(_,l)},$$slots:{default:!0}});var lt=t(ot,2);k(lt,{class:"bg-[var(--text-primary)] text-white",children:(_,y)=>{var l=Bt(),i=u(l),v=t(r(i),2);zt(v,{size:20}),a(i);var n=t(i,2),p=r(n,!0);a(n);var m=t(n,2),d=r(m,!0);a(m),z(x=>{f(p,e(s).uptime),f(d,x)},[()=>new Date(e(s).serverTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]),o(_,l)},$$slots:{default:!0}});var nt=t(lt,2);k(nt,{children:(_,y)=>{var l=Ft(),i=u(l),v=t(r(i),2);Ct(v,{size:20}),a(i);var n=t(i,2),p=r(n,!0);a(n);var m=t(n,2);X(m,21,()=>Object.entries(e(s).environments).filter(([d,x])=>x.installed),Y,(d,x)=>{var j=pt(()=>yt(e(x),2));let h=()=>e(j)[0],b=()=>e(j)[1];W(d,{variant:"outline",children:(D,K)=>{F();var A=Q();z(()=>f(A,`${h()??""}
                            ${(b().version||"")??""}`)),o(D,A)},$$slots:{default:!0}})}),a(m),z(d=>f(p,d),[()=>Object.values(e(s).environments).filter(d=>d.installed).length]),o(_,l)},$$slots:{default:!0}});var ut=t(nt,2);k(ut,{class:"bg-[var(--warning-light)]",children:(_,y)=>{var l=Ht(),i=u(l),v=t(r(i),2);kt(v,{size:20,class:"text-[var(--warning)]"}),a(i);var n=t(i,2),p=r(n,!0);a(n),F(2),z(()=>f(p,e(s).health.counts.info+e(s).health.counts.warning)),o(_,l)},$$slots:{default:!0}}),a(J);var vt=t(J,2);k(vt,{class:"flex items-center justify-between",children:(_,y)=>{var l=Ot(),i=t(u(l),2),v=t(r(i));jt(v,{size:16}),a(i),o(_,l)},$$slots:{default:!0}});var dt=t(vt,2),ct=t(r(dt),2);X(ct,21,()=>e(s).services,Y,(_,y)=>{k(_,{class:"flex items-center justify-between !p-4",children:(l,i)=>{var v=Ut(),n=u(v),p=r(n),m=t(p,2),d=r(m,!0);a(m);var x=t(m,2);{var j=b=>{W(b,{variant:"outline",children:(D,K)=>{F();var A=Q("App");o(D,A)},$$slots:{default:!0}})};E(x,b=>{e(y).isApp&&b(j)})}a(n);var h=t(n,2);{let b=pt(()=>e(y).running?"success":"error");W(h,{get variant(){return e(b)},children:(D,K)=>{F();var A=Q();z(()=>f(A,e(y).status)),o(D,A)},$$slots:{default:!0}})}z(()=>{wt(p,1,`h-3 w-3 rounded-full ${e(y).running?"bg-[var(--success)] shadow-[0_0_8px_var(--success)]":"bg-[var(--error)]"}`),f(d,e(y).name)}),o(l,v)},$$slots:{default:!0}})}),a(ct),a(dt),o(G,B)};E(it,G=>{e(s)&&G(O)},!0)}o(M,T)};E(Z,M=>{e(P)?M(st):M(q,!1)},!0)}o(c,I)};E(S,c=>{e(C)?c(mt):c(ft,!1)})}a($),o(N,$),ht()}export{se as component};
