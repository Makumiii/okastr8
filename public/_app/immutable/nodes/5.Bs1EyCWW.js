import{f as n,a,s as h,t as J,c as yt}from"../chunks/BesHKk2l.js";import{o as gt}from"../chunks/CMSYLF-L.js";import{p as $t,s as P,a as X,h as wt,c as v,g as e,b as Ct,e as o,d as i,r as s,f as L,t as D,n as B}from"../chunks/DcwGHiHW.js";import{i as b}from"../chunks/VPZc6XJw.js";import{e as Pt,i as Lt}from"../chunks/D9-Fv5Cr.js";import{r as Gt,a as Ht}from"../chunks/sNASJAqg.js";import{b as Ut}from"../chunks/BKS9-7GM.js";import{B as Y}from"../chunks/7OBOsxqh.js";import{C as G}from"../chunks/CcxZSFxj.js";import{g as K,B as Z,p as kt}from"../chunks/BhjZa1Ej.js";import{t as R}from"../chunks/CgBnaJbM.js";var Dt=n('<span class="inline-block h-2 w-2 rounded-full bg-green-500"></span> ',1),Bt=n('<div class="flex items-center gap-3"><!> <!></div>'),Rt=n('<div class="h-8 w-8 animate-spin rounded-full border-4 border-[var(--primary)] border-t-transparent"></div> <p class="mt-4 text-[var(--text-secondary)]">Loading...</p>',1),St=n('<div class="text-6xl">üêô</div> <h2 class="mt-4 text-xl font-semibold text-[var(--text-primary)]">Connect to GitHub</h2> <p class="mt-2 text-center text-[var(--text-secondary)]">Link your GitHub account to import and deploy repositories</p> <!>',1),jt=n('<input type="text" placeholder="Search repositories..." class="w-full rounded-[var(--radius-md)] border border-[var(--border)] bg-white px-4 py-2.5 text-sm text-[var(--text-primary)] placeholder:text-[var(--text-muted)] focus:border-[var(--primary)] focus:outline-none"/>'),Ft=n('<p class="text-[var(--text-secondary)]"> </p>'),Nt=n('<p class="mt-0.5 text-sm text-[var(--text-secondary)] line-clamp-1"> </p>'),zt=n('<div class="flex items-center gap-4"><div class="flex h-10 w-10 items-center justify-center rounded-lg bg-[var(--bg-sidebar)] text-lg"> </div> <div><div class="flex items-center gap-2"><span class="font-semibold text-[var(--text-primary)]"> </span> <!></div> <!> <p class="mt-1 text-xs text-[var(--text-muted)]"> </p></div></div> <a class="inline-flex items-center gap-2 rounded-[var(--radius-md)] bg-[var(--primary)] px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-[var(--primary-hover)]">Deploy</a>',1),At=n('<div class="space-y-3"></div>'),It=n("<!> <!>",1),Mt=n('<div class="space-y-6"><div class="flex items-center justify-between"><div><h1 class="text-2xl font-bold text-[var(--text-primary)]">GitHub</h1> <p class="mt-1 text-[var(--text-secondary)]">Connect and deploy from your repositories</p></div> <!></div> <!></div>');function te(tt,et){$t(et,!0);let x=P(null),H=P(X([])),S=P(!0),y=P("");wt(()=>{v(U,e(H).filter(t=>t.name.toLowerCase().includes(e(y).toLowerCase())||t.description?.toLowerCase().includes(e(y).toLowerCase())),!0)});let U=P(X([]));gt(async()=>{await at()});async function at(){v(S,!0);try{const t=await K("/github/status");v(x,t.data||{connected:!1},!0),e(x)?.connected&&await rt()}catch{R.error("Failed to load GitHub status")}finally{v(S,!1)}}async function rt(){const t=await K("/github/repos");t.success&&t.data?.repos&&(v(H,t.data.repos,!0),v(U,e(H),!0))}async function st(){try{const t=await K("/github/auth-url");t.success&&t.data?.authUrl?window.location.href=t.data.authUrl:R.error(t.message||"Failed to get auth URL")}catch{R.error("Failed to connect to GitHub")}}async function ot(){await kt("/github/disconnect"),R.success("GitHub disconnected"),v(x,{connected:!1},!0),v(H,[],!0)}function it(t){return new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}var j=Mt(),F=o(j),nt=i(o(F),2);{var lt=t=>{var u=Bt(),g=o(u);Z(g,{variant:"success",children:(w,p)=>{var l=Dt(),C=i(L(l));D(()=>h(C,` Connected as @${e(x).username??""}`)),a(w,l)},$$slots:{default:!0}});var $=i(g,2);Y($,{variant:"outline",size:"sm",onclick:ot,children:(w,p)=>{B();var l=J("Disconnect");a(w,l)},$$slots:{default:!0}}),s(u),a(t,u)};b(nt,t=>{e(x)?.connected&&t(lt)})}s(F);var ct=i(F,2);{var dt=t=>{G(t,{class:"flex animate-pulse flex-col items-center p-12",children:(u,g)=>{var $=Rt();B(2),a(u,$)},$$slots:{default:!0}})},vt=t=>{var u=yt(),g=L(u);{var $=p=>{G(p,{class:"flex flex-col items-center p-12",children:(l,C)=>{var k=St(),N=i(L(k),6);Y(N,{class:"mt-6",onclick:st,children:(z,c)=>{B();var f=J("Connect GitHub Account");a(z,f)},$$slots:{default:!0}}),a(l,k)},$$slots:{default:!0}})},w=p=>{var l=It(),C=L(l);G(C,{class:"!p-4",children:(c,f)=>{var _=jt();Gt(_),Ut(_,()=>e(y),r=>v(y,r)),a(c,_)},$$slots:{default:!0}});var k=i(C,2);{var N=c=>{G(c,{class:"flex flex-col items-center p-8",children:(f,_)=>{var r=Ft(),A=o(r,!0);s(r),D(()=>h(A,e(y)?"No repositories match your search":"No repositories found")),a(f,r)},$$slots:{default:!0}})},z=c=>{var f=At();Pt(f,21,()=>e(U),Lt,(_,r)=>{G(_,{class:"flex items-center justify-between !p-4 transition-all hover:shadow-lg",children:(A,qt)=>{var O=zt(),I=L(O),M=o(I),ut=o(M,!0);s(M);var Q=i(M,2),q=o(Q),E=o(q),pt=o(E,!0);s(E);var ft=i(E,2);{var mt=d=>{Z(d,{variant:"outline",children:(m,W)=>{B();var bt=J("Private");a(m,bt)},$$slots:{default:!0}})};b(ft,d=>{e(r).private&&d(mt)})}s(q);var T=i(q,2);{var xt=d=>{var m=Nt(),W=o(m,!0);s(m),D(()=>h(W,e(r).description)),a(d,m)};b(T,d=>{e(r).description&&d(xt)})}var V=i(T,2),_t=o(V);s(V),s(Q),s(I);var ht=i(I,2);D((d,m)=>{h(ut,e(r).private?"üîí":"üì¶"),h(pt,e(r).name),h(_t,`Updated ${d??""}`),Ht(ht,"href",`/github/deploy/${m??""}`)},[()=>it(e(r).updated_at),()=>encodeURIComponent(e(r).full_name)]),a(A,O)},$$slots:{default:!0}})}),s(f),a(c,f)};b(k,c=>{e(U).length===0?c(N):c(z,!1)})}a(p,l)};b(g,p=>{e(x)?.connected?p(w,!1):p($)},!0)}a(t,u)};b(ct,t=>{e(S)?t(dt):t(vt,!1)})}s(j),a(tt,j),Ct()}export{te as component};
