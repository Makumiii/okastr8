import{c as w,a as c,d as q,f as N,s as O}from"../chunks/BesHKk2l.js";import{o as ee}from"../chunks/CMSYLF-L.js";import{f as _,p as H,e as h,d as z,g as u,r as l,t as E,n as te,b as I,h as ae,c as A,s as G}from"../chunks/DcwGHiHW.js";import{l as k,s as L,a as R,b as T,i as D}from"../chunks/VPZc6XJw.js";import{g as F,c as J,a as re,s as K,d as V}from"../chunks/sNASJAqg.js";import{i as Q}from"../chunks/BlO2upe1.js";import{e as U,i as se}from"../chunks/D9-Fv5Cr.js";import{p as X}from"../chunks/DPLqBrji.js";import{I as S,s as j}from"../chunks/BTbKrF2_.js";import{B as oe}from"../chunks/spdlSalz.js";import{t as W}from"../chunks/CgBnaJbM.js";const ne=!0,ie=!1,je=Object.freeze(Object.defineProperty({__proto__:null,prerender:ne,ssr:ie},Symbol.toStringTag,{value:"Module"}));function ce(o,t){const r=k(t,["children","$$slots","$$events","$$legacy"]);const n=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16"}],["path",{d:"m19 9-5 5-4-4-3 3"}]];S(o,L({name:"chart-line"},()=>r,{get iconNode(){return n},children:(i,f)=>{var e=w(),a=_(e);j(a,t,"default",{}),c(i,e)},$$slots:{default:!0}}))}function le(o,t){const r=k(t,["children","$$slots","$$events","$$legacy"]);const n=[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"}],["path",{d:"M9 18c-4.51 2-5-2-7-2"}]];S(o,L({name:"github"},()=>r,{get iconNode(){return n},children:(i,f)=>{var e=w(),a=_(e);j(a,t,"default",{}),c(i,e)},$$slots:{default:!0}}))}function de(o,t){const r=k(t,["children","$$slots","$$events","$$legacy"]);const n=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1"}]];S(o,L({name:"layout-dashboard"},()=>r,{get iconNode(){return n},children:(i,f)=>{var e=w(),a=_(e);j(a,t,"default",{}),c(i,e)},$$slots:{default:!0}}))}function ve(o,t){const r=k(t,["children","$$slots","$$events","$$legacy"]);const n=[["path",{d:"m16 17 5-5-5-5"}],["path",{d:"M21 12H9"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}]];S(o,L({name:"log-out"},()=>r,{get iconNode(){return n},children:(i,f)=>{var e=w(),a=_(e);j(a,t,"default",{}),c(i,e)},$$slots:{default:!0}}))}var ue=N("<a><!> </a>"),fe=N('<aside class="fixed left-0 top-0 z-40 h-screen w-64 border-r border-[var(--border)] bg-[var(--bg-sidebar)]"><div class="flex h-full flex-col"><div class="flex h-16 items-center gap-2 border-b border-[var(--border)] px-6"><img src="/logo.jpg" alt="Okastr8" class="h-10 w-auto rounded-lg"/></div> <nav class="flex-1 space-y-1 px-3 py-4"></nav> <div class="border-t border-[var(--border)] p-4"><button class="flex w-full items-center gap-3 rounded-[var(--radius-md)] px-3 py-2.5 text-sm font-medium text-[var(--text-secondary)] transition-colors hover:bg-[var(--bg-card)] hover:text-[var(--error)]"><!> Logout</button></div></div></aside>');function pe(o,t){H(t,!1);const r=()=>R(X,"$page",n),[n,i]=T(),f=[{href:"/",label:"Dashboard",icon:de},{href:"/github",label:"GitHub",icon:le},{href:"/apps",label:"Apps",icon:oe},{href:"/metrics",label:"Metrics",icon:ce}];function e(s,v){return s==="/"?v==="/":v.startsWith(s)}Q();var a=fe(),g=h(a),p=z(h(g),2);U(p,5,()=>f,se,(s,v)=>{var x=ue(),M=h(x);u(v).icon(M,{size:20});var $=z(M);l(x),E(y=>{re(x,"href",u(v).href),K(x,1,y),O($,` ${u(v).label??""}`)},[()=>F(J("flex items-center gap-3 rounded-[var(--radius-md)] px-3 py-2.5 text-sm font-medium transition-colors",e(u(v).href,r().url.pathname)?"bg-[var(--bg-sidebar-active)] text-[var(--primary)]":"text-[var(--text-secondary)] hover:bg-[var(--bg-card)] hover:text-[var(--text-primary)]"))]),c(s,x)}),l(p);var m=z(p,2),b=h(m);b.__click=()=>{fetch("/api/auth/logout",{method:"POST"}).then(()=>{window.location.href="/login"})};var d=h(b);ve(d,{size:20}),te(),l(b),l(m),l(g),l(a),c(o,a),I(),i()}q(["click"]);var he=N('<div><span class="text-lg font-bold"> </span> <span class="text-sm font-medium"> </span> <button class="ml-2 opacity-70 hover:opacity-100">✕</button></div>'),ge=N('<div class="fixed bottom-4 right-4 z-50 flex flex-col gap-2"></div>');function me(o,t){H(t,!1);const r=()=>R(W,"$toasts",n),[n,i]=T(),f={success:"bg-[var(--success)] text-white",error:"bg-[var(--error)] text-white",warning:"bg-[var(--warning)] text-white",info:"bg-[var(--primary)] text-white"},e={success:"✓",error:"✕",warning:"⚠",info:"ℹ"};Q();var a=ge();U(a,5,r,g=>g.id,(g,p)=>{var m=he(),b=h(m),d=h(b,!0);l(b);var s=z(b,2),v=h(s,!0);l(s);var x=z(s,2);x.__click=()=>W.remove(u(p).id),l(m),E(M=>{K(m,1,M),O(d,e[u(p).type]),O(v,u(p).message)},[()=>F(J("flex items-center gap-3 rounded-[var(--radius-md)] px-4 py-3 shadow-lg transition-all animate-in slide-in-from-right",f[u(p).type]))]),c(g,m)}),l(a),c(o,a),I(),i()}q(["click"]);var be=N('<div class="flex h-screen items-center justify-center bg-[var(--bg-page)]"><div class="flex flex-col items-center gap-4"><div class="h-8 w-8 animate-spin rounded-full border-4 border-[var(--primary)] border-t-transparent"></div> <p class="text-sm text-[var(--text-secondary)]">Loading...</p></div></div>'),xe=N('<div class="flex min-h-screen bg-[var(--bg-page)]"><!> <main class="ml-64 flex-1 p-8"><!></main></div> <!>',1);function Ae(o,t){H(t,!0);const r=()=>R(X,"$page",n),[n,i]=T();let f=G(!1),e=G(!0);const a=["/login"];ee(async()=>{if(a.includes(r().url.pathname)){A(e,!1);return}try{if((await fetch("/api/auth/me")).ok)A(f,!0);else{window.location.href="/login";return}}catch{window.location.href="/login";return}A(e,!1)}),ae(()=>{!u(e)&&!u(f)&&!a.includes(r().url.pathname)&&(window.location.href="/login")});var g=w(),p=_(g);{var m=d=>{var s=be();c(d,s)},b=d=>{var s=w(),v=_(s);{var x=$=>{var y=w(),P=_(y);V(P,()=>t.children),c($,y)},M=$=>{var y=xe(),P=_(y),B=h(P);pe(B,{});var C=z(B,2),Y=h(C);V(Y,()=>t.children),l(C),l(P);var Z=z(P,2);me(Z,{}),c($,y)};D(v,$=>{a.includes(r().url.pathname)?$(x):$(M,!1)},!0)}c(d,s)};D(p,d=>{u(e)?d(m):d(b,!1)})}c(o,g),I(),i()}export{Ae as component,je as universal};
