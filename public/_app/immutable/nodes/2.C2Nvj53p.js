import{f as u,a as l,c as rt,s as m,t as W}from"../chunks/ISW6cSpQ.js";import{o as mt}from"../chunks/CcMilK9m.js";import{p as xt,a as ut,s as H,b as q,c as e,d as i,g as t,r as a,f as $,n as D,t as g,u as it,e as ft}from"../chunks/D5eA8VJ5.js";import{i as I}from"../chunks/D7wiL91P.js";import{e as z,i as J}from"../chunks/r52qgGaC.js";import{s as _t,a as gt}from"../chunks/DHJ3Tc4X.js";import{C as y}from"../chunks/CLc_SRGS.js";import{B as M}from"../chunks/B5ufFMg8.js";import{g as ht}from"../chunks/BDoOvnV6.js";var $t=u('<div class="h-4 w-24 rounded bg-[var(--border)]"></div> <div class="mt-4 h-8 w-16 rounded bg-[var(--border)]"></div>',1),yt=u('<div class="grid gap-6 md:grid-cols-2 lg:grid-cols-4"></div>'),bt=u('<p class="text-[var(--error)]"> </p>'),wt=u('<span class="inline-block h-2 w-2 rounded-full bg-green-400"></span> ',1),Pt=u('<div class="flex items-center justify-between"><div><h2 class="text-xl font-semibold"> </h2> <p class="mt-1 opacity-80"> </p></div> <div class="flex items-center gap-3"><!> <span class="rounded-lg bg-white/10 px-3 py-1.5 text-sm"> </span></div></div>'),jt=u('<div class="flex items-start justify-between"><span class="text-sm text-[var(--text-secondary)]">Services Active</span> <span class="text-xl">‚ö°</span></div> <div class="mt-3 text-3xl font-bold text-[var(--text-primary)]"> <span class="text-lg font-normal text-[var(--text-muted)]"> </span></div> <div class="mt-3 h-2 overflow-hidden rounded-full bg-[var(--border)]"><div class="h-full bg-[var(--primary)]"></div></div>',1),At=u('<div class="flex items-start justify-between"><span class="text-sm opacity-70">System Uptime</span> <span class="text-xl">üïê</span></div> <div class="mt-3 text-2xl font-bold"> </div> <div class="mt-3 border-t border-white/10 pt-3 text-sm opacity-70"> </div>',1),St=u('<div class="flex items-start justify-between"><span class="text-sm text-[var(--text-secondary)]">Environments</span> <span class="text-xl">üì¶</span></div> <div class="mt-3 text-3xl font-bold text-[var(--text-primary)]"> </div> <div class="mt-3 flex flex-wrap gap-1.5"></div>',1),Ct=u('<div class="flex items-start justify-between"><span class="text-sm text-[var(--warning)] opacity-80">System Load</span> <span class="text-xl">üî•</span></div> <div class="mt-3 text-3xl font-bold text-[var(--text-primary)]"> </div> <p class="mt-1 text-sm text-[var(--text-secondary)]">Active processes</p>',1),Dt=u('<div><h3 class="text-lg font-semibold text-[var(--text-primary)]">Deploy new app?</h3> <p class="mt-0.5 text-sm text-[var(--text-secondary)]">Connect to GitHub and ship in seconds.</p></div> <a href="/github" class="rounded-full bg-[var(--text-primary)] px-6 py-2.5 text-sm font-medium text-white transition-colors hover:bg-[var(--primary)]">Go to GitHub ‚Üí</a>',1),kt=u('<div class="flex items-center gap-3"><span></span> <span class="font-medium text-[var(--text-primary)]"> </span> <!></div> <!>',1),Gt=u('<!> <div class="grid gap-6 md:grid-cols-2 lg:grid-cols-4"><!> <!> <!> <!></div> <!> <div><h3 class="mb-4 text-lg font-semibold text-[var(--text-primary)]">Active Services</h3> <div class="space-y-3"></div></div>',1),Lt=u('<div class="space-y-6"><div><h1 class="text-2xl font-bold text-[var(--text-primary)]">Dashboard</h1> <p class="mt-1 text-[var(--text-secondary)]">Monitor your server and deployments</p></div> <!></div>');function Wt(lt,ot){xt(ot,!0);let o=q(null),K=q(!0),B=q("");mt(async()=>{await N();const d=setInterval(N,3e4);return()=>clearInterval(d)});async function N(){try{const d=await ht("/system/status");d.success&&d.data?H(o,d.data,!0):H(B,d.message||"Failed to load status",!0)}catch{H(B,"Failed to connect to server")}finally{H(K,!1)}}var O=Lt(),vt=e(i(O),2);{var nt=d=>{var A=yt();z(A,20,()=>Array(4),J,(T,Q)=>{y(T,{class:"animate-pulse",children:(U,P)=>{var S=$t();D(2),l(U,S)},$$slots:{default:!0}})}),a(A),l(d,A)},dt=d=>{var A=rt(),T=$(A);{var Q=P=>{y(P,{class:"bg-[var(--error-light)]",children:(S,R)=>{var k=bt(),G=i(k);a(k),g(()=>m(G,`‚ùå ${t(B)??""}`)),l(S,k)},$$slots:{default:!0}})},U=P=>{var S=rt(),R=$(S);{var k=G=>{var V=Gt(),X=$(V);y(X,{class:"bg-gradient-to-br from-[var(--primary)] to-[var(--primary-hover)] text-white",children:(x,_)=>{var s=Pt(),r=i(s),n=i(r),c=i(n);a(n);var v=e(n,2),p=i(v);a(v),a(r);var h=e(r,2),f=i(h);M(f,{variant:"success",class:"!bg-white/20 !text-white",children:(w,j)=>{var F=wt(),C=e($(F));g(pt=>m(C,` ${pt??""}`),[()=>t(o).health.status.toUpperCase()]),l(w,F)},$$slots:{default:!0}});var b=e(f,2),L=i(b);a(b),a(h),a(s),g(()=>{m(c,`Welcome back, ${t(o).user??""}`),m(p,`All systems operational. ${t(o).health.counts.info??""} notifications
                        today.`),m(L,`üñ•Ô∏è ${t(o).hostname??""}`)}),l(x,s)},$$slots:{default:!0}});var E=e(X,2),Y=i(E);y(Y,{children:(x,_)=>{var s=jt(),r=e($(s),2),n=i(r),c=e(n),v=i(c);a(c),a(r);var p=e(r,2),h=i(p);a(p),g((f,b)=>{m(n,`${f??""} `),m(v,`/ ${t(o).services.length??""}`),_t(h,`width: ${b??""}%`)},[()=>t(o).services.filter(f=>f.running).length,()=>t(o).services.filter(f=>f.running).length/t(o).services.length*100]),l(x,s)},$$slots:{default:!0}});var Z=e(Y,2);y(Z,{class:"bg-[var(--text-primary)] text-white",children:(x,_)=>{var s=At(),r=e($(s),2),n=i(r,!0);a(r);var c=e(r,2),v=i(c,!0);a(c),g(p=>{m(n,t(o).uptime),m(v,p)},[()=>new Date(t(o).serverTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]),l(x,s)},$$slots:{default:!0}});var tt=e(Z,2);y(tt,{children:(x,_)=>{var s=St(),r=e($(s),2),n=i(r,!0);a(r);var c=e(r,2);z(c,21,()=>Object.entries(t(o).environments).filter(([v,p])=>p.installed),J,(v,p)=>{var h=it(()=>ft(t(p),2));let f=()=>t(h)[0],b=()=>t(h)[1];M(v,{variant:"outline",children:(L,w)=>{D();var j=W();g(()=>m(j,`${f()??""}
                            ${(b().version||"")??""}`)),l(L,j)},$$slots:{default:!0}})}),a(c),g(v=>m(n,v),[()=>Object.values(t(o).environments).filter(v=>v.installed).length]),l(x,s)},$$slots:{default:!0}});var ct=e(tt,2);y(ct,{class:"bg-[var(--warning-light)]",children:(x,_)=>{var s=Ct(),r=e($(s),2),n=i(r,!0);a(r),D(2),g(()=>m(n,t(o).health.counts.info+t(o).health.counts.warning)),l(x,s)},$$slots:{default:!0}}),a(E);var et=e(E,2);y(et,{class:"flex items-center justify-between",children:(x,_)=>{var s=Dt();D(2),l(x,s)},$$slots:{default:!0}});var at=e(et,2),st=e(i(at),2);z(st,21,()=>t(o).services,J,(x,_)=>{y(x,{class:"flex items-center justify-between !p-4",children:(s,r)=>{var n=kt(),c=$(n),v=i(c),p=e(v,2),h=i(p,!0);a(p);var f=e(p,2);{var b=w=>{M(w,{variant:"outline",children:(j,F)=>{D();var C=W("App");l(j,C)},$$slots:{default:!0}})};I(f,w=>{t(_).isApp&&w(b)})}a(c);var L=e(c,2);{let w=it(()=>t(_).running?"success":"error");M(L,{get variant(){return t(w)},children:(j,F)=>{D();var C=W();g(()=>m(C,t(_).status)),l(j,C)},$$slots:{default:!0}})}g(()=>{gt(v,1,`h-3 w-3 rounded-full ${t(_).running?"bg-[var(--success)] shadow-[0_0_8px_var(--success)]":"bg-[var(--error)]"}`),m(h,t(_).name)}),l(s,n)},$$slots:{default:!0}})}),a(st),a(at),l(G,V)};I(R,G=>{t(o)&&G(k)},!0)}l(P,S)};I(T,P=>{t(B)?P(Q):P(U,!1)},!0)}l(d,A)};I(vt,d=>{t(K)?d(nt):d(dt,!1)})}a(O),l(lt,O),ut()}export{Wt as component};
