import{f as p,a as d,c as X,s as u}from"../chunks/ISW6cSpQ.js";import{o as ct}from"../chunks/CcMilK9m.js";import{p as vt,a as dt,s as I,b as q,c as o,d as r,g as e,r as t,f as k,n as Y,t as M}from"../chunks/D5eA8VJ5.js";import{i as E}from"../chunks/D7wiL91P.js";import{e as Z,i as tt}from"../chunks/r52qgGaC.js";import{b as B}from"../chunks/DHJ3Tc4X.js";import{C as w}from"../chunks/CLc_SRGS.js";import{g as nt}from"../chunks/BDoOvnV6.js";var mt=p('<div class="h-32 w-32 rounded-full bg-[var(--border)]"></div> <div class="mt-4 h-4 w-20 rounded bg-[var(--border)]"></div>',1),xt=p('<div class="grid gap-6 md:grid-cols-3"></div>'),pt=p('<p class="text-[var(--error)]"> </p>'),ft=p('<div class="relative h-32 w-32"><svg class="h-full w-full -rotate-90" viewBox="0 0 100 100"><circle class="fill-none stroke-[var(--border)]" cx="50" cy="50" r="42" stroke-width="12"></circle><circle class="fill-none transition-all duration-500" cx="50" cy="50" r="42" stroke-width="12" stroke-linecap="round"></circle></svg> <div class="absolute inset-0 flex flex-col items-center justify-center"><span class="text-2xl font-bold text-[var(--text-primary)]"> </span></div></div> <h3 class="mt-4 text-lg font-semibold text-[var(--text-primary)]">CPU Usage</h3> <p class="text-sm text-[var(--text-secondary)]"> </p>',1),ut=p('<div class="relative h-32 w-32"><svg class="h-full w-full -rotate-90" viewBox="0 0 100 100"><circle class="fill-none stroke-[var(--border)]" cx="50" cy="50" r="42" stroke-width="12"></circle><circle class="fill-none transition-all duration-500" cx="50" cy="50" r="42" stroke-width="12" stroke-linecap="round"></circle></svg> <div class="absolute inset-0 flex flex-col items-center justify-center"><span class="text-2xl font-bold text-[var(--text-primary)]"> </span></div></div> <h3 class="mt-4 text-lg font-semibold text-[var(--text-primary)]">Memory</h3> <p class="text-sm text-[var(--text-secondary)]"> </p>',1),_t=p('<div class="relative h-32 w-32"><svg class="h-full w-full -rotate-90" viewBox="0 0 100 100"><circle class="fill-none stroke-[var(--border)]" cx="50" cy="50" r="42" stroke-width="12"></circle><circle class="fill-none transition-all duration-500" cx="50" cy="50" r="42" stroke-width="12" stroke-linecap="round"></circle></svg> <div class="absolute inset-0 flex flex-col items-center justify-center"><span class="text-2xl font-bold text-[var(--text-primary)]"> </span></div></div> <h3 class="mt-4 text-lg font-semibold text-[var(--text-primary)]">Disk</h3> <p class="text-sm text-[var(--text-secondary)]"> </p>',1),gt=p('<div class="rounded-[var(--radius-md)] bg-[var(--bg-sidebar)] p-4"><p class="text-sm text-[var(--text-secondary)]"> </p> <p class="mt-1 text-2xl font-bold text-[var(--text-primary)]"> </p></div>'),ht=p('<h3 class="mb-4 text-lg font-semibold text-[var(--text-primary)]">System Load</h3> <div class="grid gap-4 md:grid-cols-3"></div>',1),yt=p('<div class="flex items-center justify-between"><div><p class="text-sm text-[var(--primary)]">Server Uptime</p> <p class="mt-1 text-2xl font-bold text-[var(--text-primary)]"> </p></div> <span class="text-4xl">ðŸŸ¢</span></div>'),$t=p('<div class="grid gap-6 md:grid-cols-3"><!> <!> <!></div> <!> <!>',1),bt=p('<div class="space-y-6"><div><h1 class="text-2xl font-bold text-[var(--text-primary)]">System Metrics</h1> <p class="mt-1 text-[var(--text-secondary)]">Real-time server performance monitoring</p></div> <!></div>');function St(rt,et){vt(et,!0);let s=q(null),H=q(!0),U=q("");ct(async()=>{await J();const a=setInterval(J,1e4);return()=>clearInterval(a)});async function J(){try{const a=await nt("/system/metrics");a.success&&a.data?I(s,a.data,!0):I(U,a.message||"Failed to load metrics",!0)}catch{I(U,"Failed to connect to server")}finally{I(H,!1)}}function A(a){if(a===0)return"0 B";const _=1024,F=["B","KB","MB","GB","TB"],j=Math.floor(Math.log(a)/Math.log(_));return parseFloat((a/Math.pow(_,j)).toFixed(1))+" "+F[j]}function L(a){return a<60?"var(--success)":a<85?"var(--warning)":"var(--error)"}var z=bt(),at=o(r(z),2);{var st=a=>{var _=xt();Z(_,20,()=>Array(3),tt,(F,j)=>{w(F,{class:"flex animate-pulse flex-col items-center p-8",children:(G,y)=>{var P=mt();Y(2),d(G,P)},$$slots:{default:!0}})}),t(_),d(a,_)},lt=a=>{var _=X(),F=k(_);{var j=y=>{w(y,{class:"bg-[var(--error-light)]",children:(P,N)=>{var C=pt(),S=r(C);t(C),M(()=>u(S,`âŒ ${e(U)??""}`)),d(P,C)},$$slots:{default:!0}})},G=y=>{var P=X(),N=k(P);{var C=S=>{var O=$t(),K=k(O),Q=r(K);w(Q,{class:"flex flex-col items-center p-8",children:(g,D)=>{var c=ft(),l=k(c),i=r(l),n=o(r(i));t(i);var m=o(i,2),v=r(m),x=r(v);t(v),t(m),t(l);var f=o(l,4),h=r(f);t(f),M(($,b)=>{B(n,"stroke",$),B(n,"stroke-dasharray",`${e(s).cpu.usage*2.64}, 264`),u(x,`${b??""}%`),u(h,`${e(s).cpu.cores??""} cores`)},[()=>L(e(s).cpu.usage),()=>e(s).cpu.usage.toFixed(0)]),d(g,c)},$$slots:{default:!0}});var V=o(Q,2);w(V,{class:"flex flex-col items-center p-8",children:(g,D)=>{var c=ut(),l=k(c),i=r(l),n=o(r(i));t(i);var m=o(i,2),v=r(m),x=r(v);t(v),t(m),t(l);var f=o(l,4),h=r(f);t(f),M(($,b,R,T)=>{B(n,"stroke",$),B(n,"stroke-dasharray",`${e(s).memory.usedPercent*2.64}, 264`),u(x,`${b??""}%`),u(h,`${R??""} / ${T??""}`)},[()=>L(e(s).memory.usedPercent),()=>e(s).memory.usedPercent.toFixed(0),()=>A(e(s).memory.used),()=>A(e(s).memory.total)]),d(g,c)},$$slots:{default:!0}});var ot=o(V,2);w(ot,{class:"flex flex-col items-center p-8",children:(g,D)=>{var c=_t(),l=k(c),i=r(l),n=o(r(i));t(i);var m=o(i,2),v=r(m),x=r(v);t(v),t(m),t(l);var f=o(l,4),h=r(f);t(f),M(($,b,R,T)=>{B(n,"stroke",$),B(n,"stroke-dasharray",`${e(s).disk.usedPercent*2.64}, 264`),u(x,`${b??""}%`),u(h,`${R??""} / ${T??""}`)},[()=>L(e(s).disk.usedPercent),()=>e(s).disk.usedPercent.toFixed(0),()=>A(e(s).disk.used),()=>A(e(s).disk.total)]),d(g,c)},$$slots:{default:!0}}),t(K);var W=o(K,2);w(W,{children:(g,D)=>{var c=ht(),l=o(k(c),2);Z(l,20,()=>[1,5,15],tt,(i,n,m)=>{var v=gt(),x=r(v),f=r(x);t(x);var h=o(x,2),$=r(h,!0);t(h),t(v),M(b=>{u(f,`${n??""} min avg`),u($,b)},[()=>e(s).loadAvg[m]?.toFixed(2)||"0.00"]),d(i,v)}),t(l),d(g,c)},$$slots:{default:!0}});var it=o(W,2);w(it,{class:"bg-[var(--primary-light)]",children:(g,D)=>{var c=yt(),l=r(c),i=o(r(l),2),n=r(i);t(i),t(l),Y(2),t(c),M((m,v,x)=>u(n,`${m??""}d ${v??""}h ${x??""}m`),[()=>Math.floor(e(s).uptime/86400),()=>Math.floor(e(s).uptime%86400/3600),()=>Math.floor(e(s).uptime%3600/60)]),d(g,c)},$$slots:{default:!0}}),d(S,O)};E(N,S=>{e(s)&&S(C)},!0)}d(y,P)};E(F,y=>{e(U)?y(j):y(G,!1)},!0)}d(a,_)};E(at,a=>{e(H)?a(st):a(lt,!1)})}t(z),d(rt,z),dt()}export{St as component};
