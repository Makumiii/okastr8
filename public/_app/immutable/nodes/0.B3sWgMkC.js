import{d as q,f as _,s as O,a as d,c as P}from"../chunks/ISW6cSpQ.js";import{o as V}from"../chunks/CcMilK9m.js";import{p as A,d as i,c as x,r as t,t as B,g as s,a as L,i as X,f as j,s as z,b as G}from"../chunks/D5eA8VJ5.js";import{s as M,a as R,i as H}from"../chunks/D7wiL91P.js";import{g as C,d as E,b as Y,a as F,e as I}from"../chunks/DHJ3Tc4X.js";import{i as J}from"../chunks/BdzLlc-8.js";import{e as K,i as Z}from"../chunks/r52qgGaC.js";import{p as N}from"../chunks/mmOYl5Vi.js";import{t as W}from"../chunks/PuVCaejm.js";const ee=!0,ae=!1,he=Object.freeze(Object.defineProperty({__proto__:null,prerender:ee,ssr:ae},Symbol.toStringTag,{value:"Module"}));var te=_('<a><span class="text-lg"> </span> </a>'),re=_('<aside class="fixed left-0 top-0 z-40 h-screen w-64 bg-[var(--bg-sidebar)] border-r border-[var(--border)]"><div class="flex h-full flex-col"><div class="flex h-16 items-center gap-2 border-b border-[var(--border)] px-6"><div class="flex h-8 w-8 items-center justify-center rounded-lg bg-[var(--primary)] text-white font-bold">O</div> <span class="text-lg font-semibold text-[var(--text-primary)]">okastr8</span></div> <nav class="flex-1 space-y-1 px-3 py-4"></nav> <div class="border-t border-[var(--border)] p-4"><button class="flex w-full items-center gap-3 rounded-[var(--radius-md)] px-3 py-2.5 text-sm font-medium text-[var(--text-secondary)] transition-colors hover:bg-[var(--bg-card)] hover:text-[var(--error)]"><span class="text-lg">ðŸšª</span> Logout</button></div></div></aside>');function se(y,f){A(f,!1);const u=()=>M(N,"$page",w),[w,$]=R(),h=[{href:"/",label:"Dashboard",icon:"ðŸ“Š"},{href:"/github",label:"GitHub",icon:"ðŸ™"},{href:"/apps",label:"Apps",icon:"ðŸ“¦"},{href:"/metrics",label:"Metrics",icon:"ðŸ“ˆ"}];function v(a,e){return a==="/"?e==="/":e.startsWith(a)}J();var r=re(),n=i(r),o=x(i(n),2);K(o,5,()=>h,Z,(a,e)=>{var c=te(),g=i(c),k=i(g,!0);t(g);var p=x(g);t(c),B(b=>{Y(c,"href",s(e).href),F(c,1,b),O(k,s(e).icon),O(p,` ${s(e).label??""}`)},[()=>C(E("flex items-center gap-3 rounded-[var(--radius-md)] px-3 py-2.5 text-sm font-medium transition-colors",v(s(e).href,u().url.pathname)?"bg-[var(--bg-sidebar-active)] text-[var(--primary)]":"text-[var(--text-secondary)] hover:bg-[var(--bg-card)] hover:text-[var(--text-primary)]"))]),d(a,c)}),t(o);var l=x(o,2),m=i(l);m.__click=()=>{fetch("/api/auth/logout",{method:"POST"}).then(()=>{window.location.href="/login"})},t(l),t(n),t(r),d(y,r),L(),$()}q(["click"]);var oe=_('<div><span class="text-lg font-bold"> </span> <span class="text-sm font-medium"> </span> <button class="ml-2 opacity-70 hover:opacity-100">âœ•</button></div>'),ie=_('<div class="fixed bottom-4 right-4 z-50 flex flex-col gap-2"></div>');function ne(y,f){A(f,!1);const u=()=>M(W,"$toasts",w),[w,$]=R(),h={success:"bg-[var(--success)] text-white",error:"bg-[var(--error)] text-white",warning:"bg-[var(--warning)] text-white",info:"bg-[var(--primary)] text-white"},v={success:"âœ“",error:"âœ•",warning:"âš ",info:"â„¹"};J();var r=ie();K(r,5,u,n=>n.id,(n,o)=>{var l=oe(),m=i(l),a=i(m,!0);t(m);var e=x(m,2),c=i(e,!0);t(e);var g=x(e,2);g.__click=()=>W.remove(s(o).id),t(l),B(k=>{F(l,1,k),O(a,v[s(o).type]),O(c,s(o).message)},[()=>C(E("flex items-center gap-3 rounded-[var(--radius-md)] px-4 py-3 shadow-lg transition-all animate-in slide-in-from-right",h[s(o).type]))]),d(n,l)}),t(r),d(y,r),L(),$()}q(["click"]);var le=_('<div class="flex h-screen items-center justify-center bg-[var(--bg-page)]"><div class="flex flex-col items-center gap-4"><div class="h-8 w-8 animate-spin rounded-full border-4 border-[var(--primary)] border-t-transparent"></div> <p class="text-sm text-[var(--text-secondary)]">Loading...</p></div></div>'),ce=_('<div class="flex min-h-screen bg-[var(--bg-page)]"><!> <main class="ml-64 flex-1 p-8"><!></main></div> <!>',1);function _e(y,f){A(f,!0);const u=()=>M(N,"$page",w),[w,$]=R();let h=G(!1),v=G(!0);const r=["/login"];V(async()=>{if(r.includes(u().url.pathname)){z(v,!1);return}try{if((await fetch("/api/auth/me")).ok)z(h,!0);else{window.location.href="/login";return}}catch{window.location.href="/login";return}z(v,!1)}),X(()=>{!s(v)&&!s(h)&&!r.includes(u().url.pathname)&&(window.location.href="/login")});var n=P(),o=j(n);{var l=a=>{var e=le();d(a,e)},m=a=>{var e=P(),c=j(e);{var g=p=>{var b=P(),S=j(b);I(S,()=>f.children),d(p,b)},k=p=>{var b=ce(),S=j(b),T=i(S);se(T,{});var D=x(T,2),Q=i(D);I(Q,()=>f.children),t(D),t(S);var U=x(S,2);ne(U,{}),d(p,b)};H(c,p=>{r.includes(u().url.pathname)?p(g):p(k,!1)},!0)}d(a,e)};H(o,a=>{s(v)?a(l):a(m,!1)})}d(y,n),L(),$()}export{_e as component,he as universal};
